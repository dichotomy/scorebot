/*
* Kendo UI Web v2012.1.322 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at http://kendoui.com/web-license
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(a,b){function Q(b){b=a(b),b.filter(".k-first:not(:first-child)").removeClass(t),b.filter(".k-last:not(:last-child)").removeClass(p),b.filter(":first-child").addClass(t),b.filter(":last-child").addClass(p)}function P(b){b=a(b),b.find(".k-icon").remove(),b.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-arrow]))").each(function(){var b=a(this),c=b.parent().parent();b.append("<span class='k-icon "+(c.hasClass(n+"-horizontal")?"k-arrow-down":"k-arrow-next")+"'/>")})}function O(b){b=a(b),b.children(l).addClass(u),b.children("a").addClass(o).children(l).addClass(u),b.filter(":not([disabled])").addClass(C),b.filter(".k-separator:empty").append("&nbsp;"),b.filter("li[disabled]").addClass(D).removeAttr("disabled"),b.children("a:focus").parent().addClass("k-state-active"),b.children("."+o).length||b.contents().filter(function(){return!this.nodeName.match(k)&&(this.nodeType!=3||!!a.trim(this.nodeValue))}).wrapAll("<span class='"+o+"'/>"),P(b),Q(b)}function N(b,c){try{return a.contains(b,c)}catch(d){return!1}}function M(a,b){a=a.split(" ")[!b+0]||a;var d={origin:["bottom","left"],position:["top","left"]},e=/left|right/.test(a);e?(d.origin=["top",a],d.position[1]=c.directions[a].reverse):(d.origin[0]=a,d.position[0]=c.directions[a].reverse),d.origin=d.origin.join(" "),d.position=d.position.join(" ");return d}function L(a,b){a=a.split(" ")[!b+0]||a;return a.replace("top","up").replace("bottom","down")}var c=window.kendo,d=c.ui,e=c.support.touch,f=a.extend,g=a.proxy,h=a.each,i=c.template,j=d.Widget,k=/^(ul|a|div)$/i,l="img",m="open",n="k-menu",o="k-link",p="k-last",q="close",r=e?"touchend":"click",s="timer",t="k-first",u="k-image",v=":empty",w="select",x="zIndex",y="mouseenter",z="mouseleave",A="kendoPopup",B="slideIn:right",C="k-state-default",D="k-state-disabled",E=".k-group",F=".k-item",G=".k-item.k-state-disabled",H=".k-item:not(.k-state-disabled)",I=".k-item:not(.k-state-disabled) > .k-link",J={group:i("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:i("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:i("<li class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } #</li>"),image:i("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:i("<span class='#= arrowClass(item, group) #'></span>"),sprite:i("<span class='k-sprite #= spriteCssClass #'></span>"),empty:i("")},K={wrapperCssClass:function(a,b){var c="k-item",d=b.index;b.enabled===!1?c+=" k-state-disabled":c+=" k-state-default",a.firstLevel&&d==0&&(c+=" k-first"),d==a.length-1&&(c+=" k-last");return c},textClass:function(a){return o},textAttributes:function(a){return a.url?" href='"+a.url+"'":""},arrowClass:function(a,b){var c="k-icon";b.horizontal?c+=" k-arrow-down":c+=" k-arrow-right";return c},text:function(a){return a.encoded===!1?a.text:c.htmlEncode(a.text)},tag:function(a){return a.url?"a":"span"},groupAttributes:function(a){return a.expanded!==!0?" style='display:none'":""},groupCssClass:function(a){return"k-group"}},R=j.extend({init:function(b,d){var f=this;j.fn.init.call(f,b,d),b=f.wrapper=f.element,d=f.options,d.dataSource&&f.element.empty().append(a(R.renderGroup({items:d.dataSource,group:{firstLevel:!0,horizontal:f.element.hasClass(n+"-horizontal"),expanded:!0},menu:{}})).children()),f._updateClasses(),d.animation===!1&&(d.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),f.nextItemZIndex=100,b.delegate(G,r,!1).delegate(H,r,g(f._click,f)),e?(d.openOnClick=!0,b.delegate(I,"touchstart touchend",f._toggleHover)):b.delegate(H,y,g(f._mouseenter,f)).delegate(H,z,g(f._mouseleave,f)).delegate(I,y+" "+z,f._toggleHover),a(document).click(g(f._documentClick,f)),f.clicked=!1,c.notify(f)},events:[m,q,w],options:{name:"Menu",animation:{open:{duration:200,show:!0},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100},enable:function(a,b){this._toggleDisabled(a,b!==!1);return this},disable:function(a){this._toggleDisabled(a,!1);return this},append:function(a,b){b=this.element.find(b);var c=this._insert(a,b,b.length?b.find("> .k-group, .k-animation-container > .k-group"):null);h(c.items,function(){c.group.append(this),Q(this)}),P(b),Q(c.group.find(".k-first, .k-last"));return this},insertBefore:function(a,b){b=this.element.find(b);var c=this._insert(a,b,b.parent());h(c.items,function(){b.before(this),Q(this)}),Q(b);return this},insertAfter:function(a,b){b=this.element.find(b);var c=this._insert(a,b,b.parent());h(c.items,function(){b.after(this),Q(this)}),Q(b);return this},_insert:function(b,c,d){var e=this;if(!c||!c.length)d=e.element;var g=a.isPlainObject(b),h,i={firstLevel:d.hasClass(n),horizontal:d.hasClass(n+"-horizontal"),expanded:!0,length:d.children().length};c&&!d.length&&(d=a(R.renderGroup({group:i})).appendTo(c)),g||a.isArray(b)?h=a.map(g?[b]:b,function(b,c){return a(R.renderItem({group:i,item:f(b,{index:c})}))}):(h=a(b),O(h));return{items:h,group:d}},remove:function(a){a=this.element.find(a);var b=this,c=a.parentsUntil(b.element,F),d=a.parent("ul");a.remove();if(d&&!d.children(F).length){var e=d.parent(".k-animation-container");e.length?e.remove():d.remove()}c.length&&(c=c.eq(0),P(c),Q(c));return b},open:function(c){var d=this,e=d.options,g=e.orientation=="horizontal",h=e.direction;c=d.element.find(c),/^(top|bottom|default)$/.test(h)&&(h=g?(h+" right").replace("default","bottom"):"right"),c.each(function(){var c=a(this);clearTimeout(c.data(s)),c.data(s,setTimeout(function(){var a=c.find(".k-group:first:hidden"),i;if(a[0]&&d.trigger(m,{item:c[0]})===!1){c.data(x,c.css(x)),c.css(x,d.nextItemZIndex++),i=a.data(A);var j=c.parent().hasClass(n),k=j&&g,l=M(h,j),o=e.animation.open.effects,p=o!==b?o:"slideIn:"+L(h,j);i?(i=a.data(A),i.options.origin=l.origin,i.options.position=l.position,i.options.animation.open.effects=p):i=a.kendoPopup({origin:l.origin,position:l.position,collision:k?"fit":"fit flip",anchor:c,appendTo:c,animation:{open:f(!0,{effects:p},e.animation.open),close:e.animation.close}}).data(A),i.open()}},d.options.hoverDelay))});return d},close:function(b){var c=this;b=c.element.find(b),b.each(function(){var b=a(this);clearTimeout(b.data(s)),b.data(s,setTimeout(function(){var a=b.find(".k-group:first:visible"),d;a[0]&&c.trigger(q,{item:b[0]})===!1&&(b.css(x,b.data(x)),b.removeData(x),d=a.data(A),d.close())},c.options.hoverDelay))});return c},_toggleDisabled:function(b,c){b=this.element.find(b),b.each(function(){a(this).toggleClass(C,c).toggleClass(D,!c)})},_toggleHover:function(b){var d=a(c.eventTarget(b)).closest(F);d.parents("li."+D).length||d.toggleClass("k-state-hover",b.type==y||b.type=="touchstart")},_updateClasses:function(){var a=this;a.element.addClass("k-widget k-reset k-header "+n).addClass(n+"-"+a.options.orientation);var b=a.element.find("li > ul").addClass("k-group").end().find("> li,.k-group > li").addClass("k-item");b.each(function(){O(this)})},_mouseenter:function(b){var c=this,d=a(b.currentTarget),e=d.children(".k-animation-container").length||d.children(E).length;(!c.options.openOnClick||c.clicked)&&!N(b.currentTarget,b.relatedTarget)&&e&&c.open(d),c.options.openOnClick&&c.clicked&&d.siblings().each(g(function(a,b){c.close(b)},c))},_mouseleave:function(b){var c=this,d=a(b.currentTarget),e=d.children(".k-animation-container").length||d.children(E).length;!c.options.openOnClick&&!N(b.currentTarget,b.relatedTarget)&&e&&c.close(d)},_click:function(b){var d=this,f,h=a(c.eventTarget(b)),i=h.closest("."+o),j=i.attr("href"),k=h.closest(F);if(k.hasClass(D))b.preventDefault();else{e&&k.siblings().each(g(function(a,b){d.close(b)},d)),b.handled||d.trigger(w,{item:k[0]}),b.handled=!0,d.options.closeOnClick&&!(j&&j.length>0)&&!k.children(E+",.k-animation-container").length&&d.close(i.parentsUntil(d.element,F));if((!k.parent().hasClass(n)||!d.options.openOnClick)&&!e)return;b.preventDefault(),d.clicked=!0,f=k.children(".k-animation-container, .k-group").is(":visible")?q:m,d[f](k)}},_documentClick:function(a){var b=this;N(b.element[0],a.target)||b.clicked&&(b.clicked=!1,b.close(b.element.find(".k-item>.k-animation-container:visible").parent()))}});f(R,{renderItem:function(a){a=f({menu:{},group:{}},a);var b=J.empty,c=a.item,d=a.menu;return J.item(f(a,{image:c.imageUrl?J.image:b,sprite:c.spriteCssClass?J.sprite:b,itemWrapper:J.itemWrapper,arrow:c.items?J.arrow:b,subGroup:R.renderGroup},K))},renderGroup:function(a){return J.group(f({renderItems:function(a){var b="",c=0,d=a.items,e=d?d.length:0,g=f({length:e},a.group);for(;c<e;c++)b+=R.renderItem(f(a,{group:g,item:f({index:c},d[c])}));return b}},a,K))}}),c.ui.plugin(R)})(jQuery)